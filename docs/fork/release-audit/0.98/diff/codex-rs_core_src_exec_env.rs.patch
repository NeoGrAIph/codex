diff --git a/codex-rs/core/src/exec_env.rs b/codex-rs/core/src/exec_env.rs
index eabd35b41..91bf97ef0 100644
--- a/codex-rs/core/src/exec_env.rs
+++ b/codex-rs/core/src/exec_env.rs
@@ -1,12 +1,9 @@
 use crate::config::types::EnvironmentVariablePattern;
 use crate::config::types::ShellEnvironmentPolicy;
 use crate::config::types::ShellEnvironmentPolicyInherit;
-use codex_protocol::ThreadId;
 use std::collections::HashMap;
 use std::collections::HashSet;
 
-pub const CODEX_THREAD_ID_ENV_VAR: &str = "CODEX_THREAD_ID";
-
 /// Construct an environment map based on the rules in the specified policy. The
 /// resulting map can be passed directly to `Command::envs()` after calling
 /// `env_clear()` to ensure no unintended variables are leaked to the spawned
@@ -14,21 +11,11 @@ pub const CODEX_THREAD_ID_ENV_VAR: &str = "CODEX_THREAD_ID";
 ///
 /// The derivation follows the algorithm documented in the struct-level comment
 /// for [`ShellEnvironmentPolicy`].
-///
-/// `CODEX_THREAD_ID` is injected when a thread id is provided, even when
-/// `include_only` is set.
-pub fn create_env(
-    policy: &ShellEnvironmentPolicy,
-    thread_id: Option<ThreadId>,
-) -> HashMap<String, String> {
-    populate_env(std::env::vars(), policy, thread_id)
+pub fn create_env(policy: &ShellEnvironmentPolicy) -> HashMap<String, String> {
+    populate_env(std::env::vars(), policy)
 }
 
-fn populate_env<I>(
-    vars: I,
-    policy: &ShellEnvironmentPolicy,
-    thread_id: Option<ThreadId>,
-) -> HashMap<String, String>
+fn populate_env<I>(vars: I, policy: &ShellEnvironmentPolicy) -> HashMap<String, String>
 where
     I: IntoIterator<Item = (String, String)>,
 {
@@ -85,11 +72,6 @@ where
         env_map.retain(|k, _| matches_any(k, &policy.include_only));
     }
 
-    // Step 6 â€“ Populate the thread ID environment variable when provided.
-    if let Some(thread_id) = thread_id {
-        env_map.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
-    }
-
     env_map
 }
 
@@ -116,16 +98,14 @@ mod tests {
         ]);
 
         let policy = ShellEnvironmentPolicy::default(); // inherit All, default excludes ignored
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars, &policy, Some(thread_id));
+        let result = populate_env(vars, &policy);
 
-        let mut expected: HashMap<String, String> = hashmap! {
+        let expected: HashMap<String, String> = hashmap! {
             "PATH".to_string() => "/usr/bin".to_string(),
             "HOME".to_string() => "/home/user".to_string(),
             "API_KEY".to_string() => "secret".to_string(),
             "SECRET_TOKEN".to_string() => "t".to_string(),
         };
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
 
         assert_eq!(result, expected);
     }
@@ -143,14 +123,12 @@ mod tests {
             ignore_default_excludes: false, // apply KEY/SECRET/TOKEN filter
             ..Default::default()
         };
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars, &policy, Some(thread_id));
+        let result = populate_env(vars, &policy);
 
-        let mut expected: HashMap<String, String> = hashmap! {
+        let expected: HashMap<String, String> = hashmap! {
             "PATH".to_string() => "/usr/bin".to_string(),
             "HOME".to_string() => "/home/user".to_string(),
         };
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
 
         assert_eq!(result, expected);
     }
@@ -166,13 +144,11 @@ mod tests {
             ..Default::default()
         };
 
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars, &policy, Some(thread_id));
+        let result = populate_env(vars, &policy);
 
-        let mut expected: HashMap<String, String> = hashmap! {
+        let expected: HashMap<String, String> = hashmap! {
             "PATH".to_string() => "/usr/bin".to_string(),
         };
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
 
         assert_eq!(result, expected);
     }
@@ -187,41 +163,11 @@ mod tests {
         };
         policy.r#set.insert("NEW_VAR".to_string(), "42".to_string());
 
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars, &policy, Some(thread_id));
-
-        let mut expected: HashMap<String, String> = hashmap! {
-            "PATH".to_string() => "/usr/bin".to_string(),
-            "NEW_VAR".to_string() => "42".to_string(),
-        };
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
-
-        assert_eq!(result, expected);
-    }
-
-    #[test]
-    fn populate_env_inserts_thread_id() {
-        let vars = make_vars(&[("PATH", "/usr/bin")]);
-        let policy = ShellEnvironmentPolicy::default();
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars, &policy, Some(thread_id));
-
-        let mut expected: HashMap<String, String> = hashmap! {
-            "PATH".to_string() => "/usr/bin".to_string(),
-        };
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
-
-        assert_eq!(result, expected);
-    }
-
-    #[test]
-    fn populate_env_omits_thread_id_when_missing() {
-        let vars = make_vars(&[("PATH", "/usr/bin")]);
-        let policy = ShellEnvironmentPolicy::default();
-        let result = populate_env(vars, &policy, None);
+        let result = populate_env(vars, &policy);
 
         let expected: HashMap<String, String> = hashmap! {
             "PATH".to_string() => "/usr/bin".to_string(),
+            "NEW_VAR".to_string() => "42".to_string(),
         };
 
         assert_eq!(result, expected);
@@ -237,10 +183,8 @@ mod tests {
             ..Default::default()
         };
 
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars.clone(), &policy, Some(thread_id));
-        let mut expected: HashMap<String, String> = vars.into_iter().collect();
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
+        let result = populate_env(vars.clone(), &policy);
+        let expected: HashMap<String, String> = vars.into_iter().collect();
         assert_eq!(result, expected);
     }
 
@@ -254,12 +198,10 @@ mod tests {
             ..Default::default()
         };
 
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars, &policy, Some(thread_id));
-        let mut expected: HashMap<String, String> = hashmap! {
+        let result = populate_env(vars, &policy);
+        let expected: HashMap<String, String> = hashmap! {
             "PATH".to_string() => "/usr/bin".to_string(),
         };
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
         assert_eq!(result, expected);
     }
 
@@ -278,13 +220,11 @@ mod tests {
             ..Default::default()
         };
 
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars, &policy, Some(thread_id));
-        let mut expected: HashMap<String, String> = hashmap! {
+        let result = populate_env(vars, &policy);
+        let expected: HashMap<String, String> = hashmap! {
             "Path".to_string() => "C:\\Windows\\System32".to_string(),
             "TEMP".to_string() => "C:\\Temp".to_string(),
         };
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
 
         assert_eq!(result, expected);
     }
@@ -302,12 +242,10 @@ mod tests {
             .r#set
             .insert("ONLY_VAR".to_string(), "yes".to_string());
 
-        let thread_id = ThreadId::new();
-        let result = populate_env(vars, &policy, Some(thread_id));
-        let mut expected: HashMap<String, String> = hashmap! {
+        let result = populate_env(vars, &policy);
+        let expected: HashMap<String, String> = hashmap! {
             "ONLY_VAR".to_string() => "yes".to_string(),
         };
-        expected.insert(CODEX_THREAD_ID_ENV_VAR.to_string(), thread_id.to_string());
         assert_eq!(result, expected);
     }
 }
