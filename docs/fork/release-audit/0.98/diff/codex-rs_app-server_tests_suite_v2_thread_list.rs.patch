diff --git a/codex-rs/app-server/tests/suite/v2/thread_list.rs b/codex-rs/app-server/tests/suite/v2/thread_list.rs
index f310b6c56..a9dabd780 100644
--- a/codex-rs/app-server/tests/suite/v2/thread_list.rs
+++ b/codex-rs/app-server/tests/suite/v2/thread_list.rs
@@ -213,7 +213,7 @@ async fn thread_list_pagination_next_cursor_none_on_last_page() -> Result<()> {
         assert!(thread.created_at > 0);
         assert_eq!(thread.updated_at, thread.created_at);
         assert_eq!(thread.cwd, PathBuf::from("/"));
-        assert_eq!(thread.cli_version, "0.0.0");
+        assert_eq!(thread.cli_version, env!("CARGO_PKG_VERSION"));
         assert_eq!(thread.source, SessionSource::Cli);
         assert_eq!(thread.git_info, None);
     }
@@ -239,7 +239,7 @@ async fn thread_list_pagination_next_cursor_none_on_last_page() -> Result<()> {
         assert!(thread.created_at > 0);
         assert_eq!(thread.updated_at, thread.created_at);
         assert_eq!(thread.cwd, PathBuf::from("/"));
-        assert_eq!(thread.cli_version, "0.0.0");
+        assert_eq!(thread.cli_version, env!("CARGO_PKG_VERSION"));
         assert_eq!(thread.source, SessionSource::Cli);
         assert_eq!(thread.git_info, None);
     }
@@ -292,7 +292,7 @@ async fn thread_list_respects_provider_filter() -> Result<()> {
     assert_eq!(thread.created_at, expected_ts);
     assert_eq!(thread.updated_at, expected_ts);
     assert_eq!(thread.cwd, PathBuf::from("/"));
-    assert_eq!(thread.cli_version, "0.0.0");
+    assert_eq!(thread.cli_version, env!("CARGO_PKG_VERSION"));
     assert_eq!(thread.source, SessionSource::Cli);
     assert_eq!(thread.git_info, None);
 
@@ -368,6 +368,8 @@ async fn thread_list_filters_by_source_kind_subagent_thread_spawn() -> Result<()
         CoreSessionSource::SubAgent(SubAgentSource::ThreadSpawn {
             parent_thread_id,
             depth: 1,
+            agent_type: None,
+            agent_name: None,
         }),
     )?;
 
@@ -427,6 +429,8 @@ async fn thread_list_filters_by_subagent_variant() -> Result<()> {
         CoreSessionSource::SubAgent(SubAgentSource::ThreadSpawn {
             parent_thread_id,
             depth: 1,
+            agent_type: None,
+            agent_name: None,
         }),
     )?;
     let other_id = create_fake_rollout_with_source(
@@ -689,7 +693,7 @@ async fn thread_list_includes_git_info() -> Result<()> {
     assert_eq!(thread.git_info, Some(expected_git));
     assert_eq!(thread.source, SessionSource::Cli);
     assert_eq!(thread.cwd, PathBuf::from("/"));
-    assert_eq!(thread.cli_version, "0.0.0");
+    assert_eq!(thread.cli_version, env!("CARGO_PKG_VERSION"));
 
     Ok(())
 }
